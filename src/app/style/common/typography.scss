@function modular-scale( $step , $base: 1rem , $ratio: 1.2  ) {

	$size: $base;
	$multiplier: $ratio;

	@if $step > 0 {
		@for $i from 1 to $step {
			$multiplier: $multiplier * $ratio;
		}
	}

	@else {
		@for $i from ( -1 + 1 ) to abs( $step ) + 1 {
			// @debug abs( $step + 1 );
			$multiplier: $multiplier / $ratio;
		}
	}

	$size: $multiplier * $base;

	@return $size;

}

html {
	font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
	font-size: 14px;
	line-height: 1.618;
  color: $color-primary;

	@include tablet {
		font-size: 15px;
	}

	@include desktop {
		font-size: 16px;
		line-height: 1.8;
	}
}

h1,
.h1,
h2,
.h2,
h3,
.h3,
h4,
.h4,
h4,
.h5,
h5,
.h6,
h6 {
	line-height: 1.25;
}

.title {
	font-size: modular-scale( 6 );
}

.subtitle {
	font-weight: normal;
}

// New typography with modular scale
h1,
.h1 {
	font-size: modular-scale( 4 );
	margin-bottom: 2.125rem;
	margin-top: 2.125rem;

	// .subtitle {
	// 	display: block;
	// 	font-size: modular-scale( 3 );
	// }
	//
	// @include tablet {
	// 	font-size: modular-scale( 5 );
	//
	// 	.subtitle {
	// 		font-size: modular-scale( 4 );
	// 	}
	// }
}

h2,
.h2 {
	// @include modular-baseline( 4 );
	font-size: modular-scale( 3 );
	margin-bottom: 1.6875rem;
	margin-top: 1.6875rem;

	// .subtitle {
	// 	font-size: modular-scale( 4 );
	// }
}

h1,
.h1,
h2,
.h2,
h3,
.h3 {
	font-weight: bold;

	.subtitle {
		display: block;
		font-size: 1/1.2 + em;
	}
}

h3,
.h3 {
	font-size: modular-scale( 2 );
	margin-bottom: 2.125rem;
	margin-top: 2.125rem;
}

h4,
.h4 {
	font-size: modular-scale( 1 );
	margin-bottom: 1.25rem;
	margin-top: 1.25rem;
}

h5,
.h5,
h6,
.h6 {
	font-size: modular-scale( 0 );
	font-weight: normal;
	margin-bottom: 0.375rem;
	margin-top: 0.375rem;
}

p,
ol,
ul {
	margin-bottom: $gutter;
	margin-top: $gutter;
}

a {
	color: $link-color;
	text-decoration: none;

	&:hover {
		color: $link-color-hover;
		text-decoration: underline;
	}

	&:active {
		position: relative;
		top: 1px;
	}
}

abbr {
	border-bottom: dotted 1px;
	cursor: help;
}

address {
	font-style: normal;
	text-align: center;
}

blockquote {
	@extend .box;

	background-color: color( light );
	margin-left: 0;
	margin-right: 0;

	footer {
		display: flex;
		flex-flow: row nowrap;

		cite {
			margin-bottom: auto;
			margin-top: auto;
		}

		figure {
			margin: auto;
		}
	}
}

cite {
	font-style: normal;

	.name {
		font-weight: bold;
	}
}

figure,
picture {
	display: block;
	margin: 0;
	text-align: center;
}

figcaption {
	@extend .box, .label, .small-type;

	// margin-bottom: 1em;
	margin-top: 1em;
	text-align: center;
}

img {
	// display: block;
	max-width: 100%;
	vertical-align: bottom; // this removes the baseline border
}

figcaption,
label,
.subtitle {
	color: color(mid-gray);
}

.label {
	font-weight: normal;
}

.sc {
	text-transform: uppercase;
}

small,
.small-type {
	font-size: 0.9em; // rem or em?
	// line-height: 1.8rem;
}

dl {
  dt {
    font-weight: bold;
    opacity:0.5;
  }
  dd {
    margin:0;
  }
}

.text {
	&-center {
		text-align: center;
	}

	// Not sure if we're going to use this but its handy to keep
	// around maybe
	&-decorate {
		position: relative;
		top: -$gutter/2;

		&:after {
			background-color: color( dark );
			border-radius: $border-radius;
			bottom: -$gutter/2;
			content: '';
			display: block;
			height: 3px;
			position: absolute;
			width: 100%;
		}
	}
}

@include tablet {
	// Typo tweeks
	@each $element in h1, h2, h3, h4, p, figure {
		.row > #{$element} {
			margin-bottom: 0;
			margin-top: 0;
		}
	}
}
